(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{13:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),o=a.n(c),r=a(5),i=a.n(r),s=(a(3),a(2)),l=a.p+"static/media/logo.a307e1c4.svg";var u=function(){return Object(n.jsx)("header",{className:"header",children:Object(n.jsx)("img",{src:l,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u043c\u0435\u0441\u0442\u043e \u0440\u043e\u0441\u0441\u0438\u044f",className:"logo"})})},p=function(e){return Object(n.jsxs)("li",{className:"place",children:[Object(n.jsx)("button",{type:"button",className:"button place__del-btn","aria-label":"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"}),Object(n.jsx)("button",{type:"button",className:"button place__img-btn",children:Object(n.jsx)("img",{src:e.cardLink,alt:e.cardTitle,className:"place__image",onClick:function(){console.log(e.cardLink,e.cardTitle),e.onCardClick(e.cardLink,e.cardTitle)}})}),Object(n.jsxs)("div",{className:"place__info",children:[Object(n.jsx)("h2",{className:"place__title",children:e.cardTitle}),Object(n.jsxs)("div",{className:"place__like-area",children:[Object(n.jsx)("button",{type:"button",className:"button place__like-btn","aria-label":"\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a"}),Object(n.jsx)("p",{className:"paragraph place__like-count",children:e.countLikes})]})]})]})},d=a(6),j=a(7),b=(document.querySelector(".profile__edit-btn"),document.querySelector(".profile__name"),document.querySelector(".profile__job"),document.querySelector(".popup__input_name-profile")),m=document.querySelector(".popup__input_job-profile"),h=(document.querySelector(".profile__avatar-btn"),document.querySelector(".profile__avatar"),document.querySelector(".popup__input_avatar-link")),_=(document.querySelector(".profile__add-btn"),document.querySelector(".popup__input_name-place")),f=document.querySelector(".popup__input_link-place"),O=(document.querySelector(".popup__input"),document.querySelector(".popup-zoom"),document.querySelector(".popup_edit-profile"),document.querySelector(".popup_edit-avatar"),new(function(){function e(t){Object(d.a)(this,e),this.url=t.url,this.headers=t.headers}return Object(j.a)(e,[{key:"getPlaces",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers}).then(this._checkPromise)}},{key:"newPlace",value:function(){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:_.value,link:f.value})}).then(this._checkPromise)}},{key:"getUserInfo",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:this.headers}).then(this._checkPromise)}},{key:"patchUserInfo",value:function(){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:b.value,about:m.value})}).then(this._checkPromise)}},{key:"patchUserAvatar",value:function(){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:h.value})}).then(this._checkPromise)}},{key:"addLike",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then(this._checkPromise)}},{key:"removeLike",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then(this._checkPromise)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then(this._checkPromise)}},{key:"_checkPromise",value:function(e){return e.ok||Promise.reject("Error ".concat(e.status)),e.json()}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-18",headers:{"Content-Type":"application/json",authorization:"87b27e82-ce10-439c-bbe6-2acce8f72cdc"}})),k=function(e){var t=Object(c.useState)(""),a=Object(s.a)(t,2),o=a[0],r=a[1],i=Object(c.useState)(""),l=Object(s.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(""),b=Object(s.a)(j,2),m=b[0],h=b[1],_=Object(c.useState)([]),f=Object(s.a)(_,2),k=f[0],x=f[1];return Object(c.useEffect)((function(){O.getUserInfo().then((function(e){r(e.name),d(e.about),h(e.avatar)}))}),[]),Object(c.useEffect)((function(){O.getPlaces().then((function(e){var t=e.map((function(e){return{link:e.link,title:e.name,cardId:e._id,ownerId:e.owner._id,ownerAva:e.owner.avatar,ownerName:e.owner.name,likes:e.likes,countLikes:e.likes.length}}));x(t),console.log(t)}))}),[]),Object(n.jsxs)("main",{className:"main",children:[Object(n.jsxs)("section",{className:"profile",children:[Object(n.jsxs)("div",{className:"profile__avatar-area",children:[Object(n.jsx)("img",{src:m,alt:o,className:"profile__avatar"}),Object(n.jsx)("button",{type:"button",className:"profile__avatar-btn","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",onClick:e.onEditAvatar})]}),Object(n.jsxs)("div",{className:"profile__info",children:[Object(n.jsxs)("div",{className:"profile__block-name",children:[Object(n.jsx)("h1",{className:"profile__name",children:o}),Object(n.jsx)("button",{type:"button",className:"button profile__edit-btn","aria-label":"\u043a\u043d\u043e\u043f\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:e.onEditProfile})]}),Object(n.jsx)("p",{className:"profile__job",children:u})]}),Object(n.jsx)("button",{type:"button",className:"button profile__add-btn","aria-label":"\u043a\u043d\u043e\u043f\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e",onClick:e.onAddPlace})]}),Object(n.jsx)("ul",{className:"places",children:k.map((function(t){var a=t.cardId,c=t.link,o=t.title;return Object(n.jsx)(p,{cardLink:c,cardTitle:o,onCardClick:e.onCardClick},a)}))})]})};var x=function(){return Object(n.jsx)("footer",{className:"footer",children:Object(n.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},N=function(e){return Object(n.jsx)("section",{className:e.card?"popup popup-zoom popup_opened":"popup popup-zoom",onClick:e.onClose,children:Object(n.jsxs)("figure",{className:"popup-zoom__container",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)("button",{type:"button",className:"button popup__close-btn","aria-label":"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",onClick:e.onClose}),Object(n.jsx)("img",{src:e.card.cardLink,alt:e.card.cardTitle,className:"popup-zoom__image"}),Object(n.jsx)("figcaption",{className:"popup-zoom__caption",children:e.card.cardTitle})]})})},v=function(e){return Object(n.jsx)("section",{className:e.isOpen?"popup popup_opened":"popup",onClick:e.onClose,children:Object(n.jsxs)("form",{className:"popup__container popup_S{props.name}",method:"post",noValidate:!0,onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)("button",{type:"button",className:"button popup__close-btn","aria-label":"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",onClick:e.onClose}),Object(n.jsx)("h2",{className:"popup__title",children:e.title}),e.children,Object(n.jsx)("button",{type:"submit",className:"popup__save-btn","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c",children:e.button})]})})},y=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(c.useState)(!1),i=Object(s.a)(r,2),l=i[0],p=i[1],d=Object(c.useState)(!1),j=Object(s.a)(d,2),b=j[0],m=j[1],h=Object(c.useState)(!1),_=Object(s.a)(h,2),f=_[0],O=_[1],y=Object(c.useState)(!1),g=Object(s.a)(y,2),C=g[0],S=g[1];return Object(n.jsxs)("div",{children:[Object(n.jsx)(u,{}),Object(n.jsx)(k,{onEditAvatar:function(){m(!0)},onEditProfile:function(){o(!0)},onAddPlace:function(){p(!0)},onCardClick:function(e,t){console.log(e,t),S({cardLink:e,cardTitle:t})}}),Object(n.jsx)(x,{}),Object(n.jsx)(v,{isOpen:b,onClose:function(){return m(!1)},name:"edit-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{type:"url",id:"avatarLink",name:"link",className:"popup__input popup__input_avatar-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",autoComplete:"off",required:!0}),Object(n.jsx)("span",{id:"avatarLink-error",className:"popup__input-error"})]})}),Object(n.jsx)(v,{isOpen:a,onClose:function(){return o(!1)},name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{type:"text",id:"fullName",className:"popup__input popup__input_name-profile",placeholder:"\u0418\u043c\u044f \u0424\u0430\u043c\u0438\u043b\u0438\u044f",autoComplete:"off",minLength:2,maxLength:40,defaultValue:!0,required:!0}),Object(n.jsx)("span",{id:"fullName-error",className:"popup__input-error"}),Object(n.jsx)("input",{type:"text",id:"jobPosition",className:"popup__input popup__input_job-profile",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f \u0438\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",autoComplete:"off",minLength:2,maxLength:200,defaultValue:!0,required:!0}),Object(n.jsx)("span",{id:"jobPosition-error",className:"popup__input-error"})]})}),Object(n.jsx)(v,{isOpen:l,onClose:function(){return p(!1)},name:"add-place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{type:"text",id:"placeName",name:"name",className:"popup__input popup__input_name-place",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",autoComplete:"off",minLength:2,maxLength:30,required:!0}),Object(n.jsx)("span",{id:"placeName-error",className:"popup__input-error"}),Object(n.jsx)("input",{type:"url",id:"placeLink",name:"link",className:"popup__input popup__input_link-place",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",autoComplete:"off",required:!0}),Object(n.jsx)("span",{id:"placeLink-error",className:"popup__input-error"})]})}),Object(n.jsx)(v,{isOpen:f,onClose:function(){return O(!1)},name:"del-place",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u043d\u044b",button:"\u0414\u0430"}),Object(n.jsx)(N,{card:C,onClose:function(){return S(!1)}})]})},g=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,14)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),o(e),r(e)}))};i.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),g()},3:function(e,t,a){}},[[13,1,2]]]);
//# sourceMappingURL=main.63e85aac.chunk.js.map